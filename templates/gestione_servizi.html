{% extends "profilo.html" %}

{% block content %}
<div class="raccolte-wrapper">
  <button class="btn-upload" onclick="apriPopupNuovoServizio()">âž• Nuovo servizio</button>
  {% if servizi %}
  <div class="raccolte-grid">
    {% for s in servizi %}
    <div class="raccolta-card">
      <img src="{{ s.immagine or '/static/img/placeholder.jpg' }}" alt="servizio">
      <h4>{{ s.nome }}</h4>
      <p>{{ s.costo }} {{ s.durata }}</p>
      <button onclick='apriPopupServizio({{ s|tojson }})'>Gestisci</button>
    </div>
    {% endfor %}
  </div>
  {% endif %}
</div>

<div id="popup-servizio" class="popup hidden">
  <div class="popup-content">
    <button class="close-btn" onclick="chiudiPopupServizio()">X</button>
    <input type="hidden" id="servizio-id">
    <label>Nome</label>
    <input type="text" id="servizio-nome">
    <label>Descrizione</label>
    <textarea id="servizio-descrizione"></textarea>
    <label>Immagine</label>
    <input type="text" id="servizio-immagine">
    <label>Costo</label>
    <input type="text" id="servizio-costo">
    <label>Durata</label>
    <input type="text" id="servizio-durata">
    <div style="margin-top:1rem; display:flex; gap:1rem;">
      <button type="button" class="btn-upload" onclick="salvaServizio()">Salva</button>
      <button type="button" class="btn-danger" onclick="eliminaServizio()">Elimina</button>
    </div>
  </div>
</div>

<div id="popup-nuovo-servizio" class="popup hidden">
  <div class="popup-content">
    <button class="close-btn" onclick="chiudiPopupNuovoServizio()">X</button>
    <label>Nome</label>
    <input type="text" id="nuovo-nome">
    <label>Descrizione</label>
    <textarea id="nuovo-descrizione"></textarea>
    <label>Immagine</label>
    <input type="text" id="nuovo-immagine">
    <label>Costo</label>
    <input type="text" id="nuovo-costo">
    <label>Durata</label>
    <input type="text" id="nuovo-durata">
    <button type="button" class="btn-upload" onclick="creaServizio()">Crea</button>
  </div>
</div>

<script src="{{ url_for('static', filename='js/servizi.js') }}"></script>
{% endblock %}

